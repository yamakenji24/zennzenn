---
title: "Next.jsã¨Tailwindã‚’åˆ©ç”¨ã—ãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ååˆºã‚¢ãƒ—ãƒª"
emoji: "ğŸ’¬"
type: "tech"
topics:
  - "nextjs"
  - "react"
  - "typescript"
  - "tailwind"
  - "frontend"
published: true
published_at: "2020-12-21 23:10"
---

:::message
ã“ã®è¨˜äº‹ã¯[SLP KBIT Advent Calendar 2020](https://adventar.org/calendars/5402)ã®21æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼
:::

# ã¯ã˜ã‚ã«
ã“ã‚“ã«ã¡ã¯ï¼ä»Šå¹´ã‚‚ã‚‚ã†ã‚ã¨æ•°æ—¥ã§çµ‚ã‚ã‚‹ã‚‚ã®ã§ã€æ—©ã„ã§ã™ã­ã€‚  
ä»Šå›ã¯å®Ÿè£…ã™ã‚‹å†…å®¹ã¯ã€ï¼‘ï¼æœˆã«ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§é–‹å‚¬ã•ã‚ŒãŸ[nextjs conf 2020](https://nextjs.org/2020/conf)ã§å®Ÿè£…ã•ã‚Œã¦ã„ãŸã€ãƒã‚±ãƒƒãƒˆç™ºè¡Œã™ã‚‹ã‚„ã¤ã‚’å…ƒãƒã‚¿ã«ã—ã¦ã„ã¾ã™ã€‚GitHubèªè¨¼ã‚’è¡Œã†ã“ã¨ã§ã€è‡ªåˆ†ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒã‚±ãƒƒãƒˆç”»åƒã‚’ç”Ÿæˆã—ã¾ã™ã€‚[ä¾‹](https://nextjs.org/2020/conf/tickets/yamakenji24)  
ä»Šå›å®Ÿè£…ã™ã‚‹ã‚¢ãƒ—ãƒªã§ã¯ã€githubèªè¨¼ã¨googleèªè¨¼ã‚’ç”¨ã„ã¦ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã€è¡¨ç¤ºã—ã¦ã„ãã¾ã™ã€‚

# ä»Šå›å®Ÿè£…ã™ã‚‹å†…å®¹
æ€ã£ãŸä»¥ä¸Šã«é•·ããªã‚Šãã†ãªã®ã§ã€å…ˆã«å®Ÿè£…ã—ãŸã‚‚ã®ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ä¸»ã«ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã€ãƒœã‚¿ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ååˆºãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒ•ãƒƒã‚¿ãƒ¼ã¿ãŸã„ãªæ§‹æˆã§åˆ†ã‘ã¦ã„ã¾ã™ã€‚
ååˆºã«è¡¨ç¤ºã—ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã¯ã€èªè¨¼ã—ãŸã‚‚ã®ã‹ã‚‰å–å¾—ã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸã€ååˆºã®å¤–æ ã¨å†…æ ã§ã€ãƒ©ãƒ³ãƒ€ãƒ ã«è‰²ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
è‡ªåˆ†å¥½ã¿ã®è‰²ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚
![](https://storage.googleapis.com/zenn-user-upload/2b7uh77gjimea1yuzdtr3domb4tt)

# Next.jsã¨Tailwindã«ã¤ã„ã¦
ã¾ãšã¯ã€Next.jsã¨Tailwindã«ã¤ã„ã¦ã€ç°¡å˜ã«ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
## Next.jsã¨ã¯
Next.jsã¯ã€Reactè£½ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
- Server side Rendering(SSR) / Static Site Generation(SSG)
- Incremental Static Regeneration
- ç”»åƒæœ€é©åŒ–ã®æä¾› (next/image)
- zero config
- /pageä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å…¨ã¦ãƒ«ãƒ¼ãƒˆå¯¾è±¡ã¨ãªã‚‹

è©³ã—ãã¯å…¬å¼ã¾ã§ [nextjs org](https://nextjs.org/)

## Tailwindã¨ã¯
Tailwindã¨ã¯ã€Utilifyãƒ¼Firstã‚’æ²ã’ãŸCSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚
Bootstrapã®ã‚ˆã†ã«å‡ºæ¥ä¸ŠãŒã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦æ§‹ç¯‰ã—ã¦ã„ãã€ã¨ã„ã†ã‚ˆã‚Šã¯è‡ªèº«ã§cssã‚’çµ„ã¿åˆã‚ã›ã¦æ§‹ç¯‰ã—ã¦ã„ãã‚¤ãƒ¡ãƒ¼ã‚¸ã ã¨æ€ã„ã¾ã™ã€‚
ä¾‹ãˆã°ã€ãƒœã‚¿ãƒ³ã«cssã‚’åŠ ãˆã‚‹å ´åˆã¯ã€btnã¿ãŸã„ãªclassã‚’è¨­å®šã›ãšã€inline styleã§è¨˜è¿°ã—ã¦ã„ãã¾ã™ã€‚
```jsx
<button class="bg-indigo-700 text-white py-2 px-6">
  ãƒœã‚¿ãƒ³
</button>
```
ã¯ã„ã€‚ã“ã“ã§æ°—ã¥ãäººã¯ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€è©³ç´°ã«cssã‚’è¨­å®šã—ãŸå ´åˆã€ã™ã”ãã‚³ãƒ¼ãƒ‰ã®è¦‹ãŸç›®ãŒæ±šããªã‚‹ã‚„ã‚“ï¼ã¨æ€ã„ã¾ã—ãŸã€‚
å®Ÿéš›ã€[å…¬å¼doc](https://tailwindcss.com/docs/utility-first)ã«ã‚‚å–ã‚Šä¸Šã’ã‚‰ã‚Œã¦ãŠã‚Šã€`ã¨ã‚Šã‚ãˆãšä½¿ã£ã¦ã¿ã‚ã€‚çµ¶å¯¾ã„ã„ã‹ã‚‰ã€‚`ã¨ã®ã“ã¨ã€‚
docã«ã“ã‚“ãªã“ã¨ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã¯ã€ãªã‹ãªã‹ãƒ¦ãƒ¼ãƒ¢ã‚¢ãŒã‚ã£ã¦é¢ç™½ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚

# ã„ã–,å®Ÿè£…
ã§ã¯ã€å®Ÿè£…ã‚’ã—ã¦ã„ãã¾ã™ã€‚
ä»Šå›ä½¿ç”¨ã™ã‚‹ä¸»ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®versionã¯ä»¥ä¸‹ã§ã™ã€‚ã€€
```json
"react": "17.0.1",
"next": "10.0.1",
"next-auth": "^3.1.0",
"tailwindcss": "^2.0.1"
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

:::details ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
```
.
â”œâ”€â”€ jest.config.js
â”œâ”€â”€ next-env.d.ts
â”œâ”€â”€ next.config.js
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js
â”œâ”€â”€ public
â”œâ”€â”€ setupTest.js
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ __tests__
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __snapshots__
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ grass.test.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ icon.test.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ signin.test.tsx
â”‚Â Â  â”œâ”€â”€ pages
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ _app.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ _document.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ api
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ auth
â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ [...nextauth].ts
â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
â”‚Â Â  â”œâ”€â”€ ui
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ColorButtonLayout.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ FooterLayout.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SaveButton.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SignIn
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ SignInLayout.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ signIn.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Title.tsx
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ card
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cardlayout.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ emptyCardProfile.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ grass.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ profile
â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Icon.tsx
â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ Profile.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ navBar.tsx
â”‚Â Â  â””â”€â”€ utils
â”‚Â Â      â”œâ”€â”€ getProfile.ts
â”‚Â Â      â”œâ”€â”€ useChangeColor.ts
â”‚Â Â      â””â”€â”€ useGetSession.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tree.txt
â””â”€â”€ tsconfig.json
```
:::

## ç’°å¢ƒæ§‹ç¯‰
### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆï¼†èµ·å‹•
ã¾ãšã¯ã€nextjsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
nextjsã¯zero-configã‚’ç›®æŒ‡ã—ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
æ§‹ç¯‰å¾Œã€è©¦ã—ã«ã‚µãƒ¼ãƒã‚’èµ·å‹•ã—ã¦å‹•ä½œã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```bash
npx create-next-app cardcreator
# or 
yarn create next-app cardcreator

cd cardcreator
npm run dev
```

### ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ä»Šå›ä½¿ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãã¾ã™
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã¯ã€tailwindé–¢é€£ã€oauthèªè¨¼ç”¨ã®3rdãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€html2canvasã€tsé–¢é€£ã§ã™
```bash
npm install autoprefixer postcss tailwindcss next-auth html2canvas
npm install -D @types/node @types/react @types/react-dom serve  typescript
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†
ã¾ãšã¯ã€tailwindã‚’ä½¿ç”¨ã™ã‚‹éš›ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã„ãã¾ã™ã€‚
åŸºæœ¬çš„ã«ã¯ã€[å…¬å¼ã‚¬ã‚¤ãƒ‰](https://tailwindcss.com/docs/guides/nextjs)é€šã‚Šã§ã™ãŒã€widthã®å€¤ã‚’ä¸€éƒ¨ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦è¨­å®šã—ã¦ã„ã¾ã™ã€‚
ä¸€èˆ¬çš„ã«ã¯ã€`purge`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä¸å¿…è¦ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’é™¤å»ã—ã€ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚ºã‚’å°ã•ãã—ã¦ãã‚Œã‚‹ã®ã§è¨­å®šã—ãŸæ–¹ãŒå¥½ã¾ã—ã„ã§ã™ã€‚
ãŸã ã—ã€ç¾åœ¨ã®`tailwind:2.0.1`ã§ã¯ã€ãƒã‚°ã‹è¨­å®šãŒè¶³ã‚Šã¦ã„ãªã„ã®ã‹ã€ã¾ã ä¸æ˜ã§ã™ãŒã€`purge`ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§cssã®ãƒ“ãƒ«ãƒ‰ãŒã“ã‘ã€æ­£å¸¸ã«åæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚
[CSS file fails to get built when purge.enabled is set to true #3080](https://github.com/tailwindlabs/tailwindcss/discussions/3080%E3%80%80)
ãã®ãŸã‚ã€ä»Šå›ã¯purgeã‚’è¨­å®šã›ãšã«ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚(é€²å±•ãŒã‚ã‚Šæ¬¡ç¬¬ã€ä¿®æ­£ã—ã¦ã„ãã¾ã™)

```js: tailwind.config.js
module.exports = {
  purge: [],
  darkMode: false, // or 'media' or 'class'
  theme: {
    extend: {
      width: {
        'crd': '40rem',  //w-crd ã‚’40remã«è¨­å®š
      }
    },
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
```
```js: postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

æ¬¡ã«ã€ç’°å¢ƒå¤‰æ•°ã¨next/imageã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®è¨­å®šã‚’è¨˜è¿°ã—ã¾ã™

è¿½è¨˜ 2020-12-23
ç¾çŠ¶ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨˜è¿°ã™ã‚‹éš›ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ç­‰ã‚’è¨˜è¿°ã§ããªã„ãŸã‚ã€åˆ—æŒ™ã¨ã„ã†å½¢ã§å¯¾å¿œã—ã¾ã—ãŸã€‚
ä¸‹è¨˜ã«ã‚‚è¨˜è¿°ã—ã¦ã„ã¾ã™ãŒã€å¤–éƒ¨ã‹ã‚‰å–å¾—ã—ãŸç”»åƒã¯originãŒç•°ãªã‚Šã€canvasä¸Šã«ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ããªã„ãŸã‚ã€next/imageã¯ç¶™ç¶šã—ã¦ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚
ãªãŠã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã®åˆ©ç”¨ã«é–¢ã—ã¦ã¯ã€`ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ãªã‚‰å®Ÿè£…ã‚’æ¤œè¨ã—ã¦ã‚‚ã„ã„ã‹ã‚‚ã­`çš„ãªã“ã¨ã‚‚æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚‚ã—å®Ÿè£…ã•ã‚ŒãŸã‚‰å¯¾å¿œã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚
https://github.com/vercel/next.js/discussions/18429

```js: next.config.js
module.exports = {
  env: {
    GITHUB_CLIENT: process.env.GITHUB_CLIENT,
    GITHUB_SECRET: process.env.GITHUB_SECRET,
    GOOGLE_CLIENT: process.env.GOOGLE_CLIENT,
    GOOGLE_SECRET: process.env.GOOGLE_SECRET,
  },
  images: {
    domains: [
      'avatars.githubusercontent.com', 
      'avatars0.githubusercontent.com', 
      'avatars1.githubusercontent.com', 
      'avatars2.githubusercontent.com', 
      'avatars3.githubusercontent.com', 
      'avatars4.githubusercontent.com', 
      'grass-graph.moshimo.works',
      'lh3.googleusercontent.com',
      'lh4.googleusercontent.com',
      'lh5.googleusercontent.com',
      'lh6.googleusercontent.com',
      'github.com'
    ],
  }
};
```

tsã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã—ã¦ã„ãã¾ã™
```json: tsconfig.json
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": false,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve"
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}
```

æœ€å¾Œã«ã€oauthèªè¨¼ã«ä½¿ã†æƒ…å ±ã‚’envã«è¨˜è¼‰ã—ã¦ã„ãã¾ã™ã€‚
```env:.env
GITHUB_CLIENT=
GITHUB_SECRET=
GOOGLE_CLIENT
GOOGLE_SECRET=
```



## å®Ÿè£…!!
ä»Šå›å®Ÿè£…ã—ã¦ã„ãä¸Šã§ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå˜ä½ã«åˆ†å‰²ã—ãŸã‚‚ã®ãŒä»¥ä¸‹ã®å›³ã«ãªã‚Šã¾ã™ã€‚
ãªãŠã€é•·ããªã‚Šãã†ãªã®ã§ã€æœ¬ã‚¢ãƒ—ãƒªã®ãƒ¡ã‚¤ãƒ³éƒ¨åˆ†ã¨ãªã‚‹Cardã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¨ãƒœã‚¿ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã®ã¿ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ç­‰ã¯githubç­‰ã§ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚[cardcreator](https://github.com/yamakenji24/CardCreator)

ãƒšãƒ¼ã‚¸ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ![](https://storage.googleapis.com/zenn-user-upload/zux7tkedguuh51x1dzmjxe286go4)

### èªè¨¼ï¼†ãƒ‡ãƒ¼ã‚¿å–å¾—
ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ãŸã‚ã«ã€oauthèªè¨¼ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
nextjsã§ã¯ã€[NextAuth](https://next-auth.js.org/)ã¨å‘¼ã°ã‚Œã‚‹ã€ossã®èªè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå­˜åœ¨ã—ã¦ãŠã‚Šã€oauthèªè¨¼ã«å¯¾å¿œã—ã¦ã„ã‚‹providerã‚‚è±Šå¯Œã«ç”¨æ„ã•ã‚Œã¦ã„ã¦ç°¡å˜ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«ã€å¯¾è±¡ã«ã™ã‚‹providerã®è¨­å®šã‚„å–å¾—ã™ã‚‹æƒ…å ±ãªã©ã‚’è¨­å®šã—ã¦ã„ãã¾ã™ã€‚

```ts: src/pages/api/auth/[...nextauth].ts
import NextAuth from 'next-auth';
import Providers from 'next-auth/providers';

const options = {
  providers: [
    Providers.GitHub({
      clientId: process.env.GITHUB_CLIENT,
      clientSecret: process.env.GITHUB_SECRET
    }),
    Providers.Google({
      clientId: process.env.GOOGLE_CLIENT,
      clientSecret: process.env.GOOGLE_SECRET
    }),
  ], 
  session: {
    jwt: true,
  },
  callbacks: { 
    session: async (session, user) => { 
      return Promise.resolve(user) 
    },
    jwt: async (token, user, account, profile) => {
      if(account) {token.provider = account.provider}
      if(profile) {token.profile = profile}
      return Promise.resolve(token) 
    }, 
  },
}
export default (req, res) => NextAuth(req, res, options);
```

èªè¨¼å¾Œã®æƒ…å ±ã¯ã€next-auth/clientã®getSession/useSessionç­‰ã§å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã®è¾ºã‚Šã®å‡¦ç†ã¯å¾Œã»ã©è¨˜è¿°ã—ã¾ã™ã€‚

### ååˆºéƒ¨åˆ†ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
ã¾ãšã¯ååˆºã«è¡¨ç¤ºã™ã‚‹æƒ…å ±ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è€ƒãˆã¦ã„ãã¾ã™ã€‚
åŸºæœ¬çš„ã«ååˆºã«ã¯ã€è‡ªèº«ã‚’è¡¨ç¾ã™ã‚‹ç”»åƒ(ã‚¢ã‚¤ã‚³ãƒ³)ã€åå‰ã‚„snsã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€æ‰€å±çµ„ç¹”ãªã©ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚ 
ä»Šå›ã¯ã€githubã¨googleèªè¨¼ã‹ã‚‰å–å¾—ã§ãã‚‹æƒ…å ±ã‚’å…ƒã«ã€ååˆºã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚
googleã‹ã‚‰å–å¾—ã§ãã‚‹æƒ…å ±ã¨ã—ã¦ã¯ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã¨åå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç­‰ã—ã‹æ¤œè¨ã§ããªã‹ã£ãŸãŸã‚ã€ä»Šå›ã®èª¬æ˜ã§ã¯githubèªè¨¼æ™‚ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ä»¥ä¸‹ã®å›³ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ã¾ãšã€ä¸Šæ®µã¨ä¸‹æ®µã«åˆ¥ã‚Œã¦ãŠã‚Šã€ä¸Šæ®µã§ã¯å½“ã‚¢ãƒ—ãƒªã®ãƒ­ã‚´ã¨githubã®è‰ã‚’ã€ä¸‹æ®µã§ã¯ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã¨åå‰ã€githubã«å…¬é–‹ã—ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚

ååˆºã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ![](https://storage.googleapis.com/zenn-user-upload/01fmnfzyp4gylzmwzfga7mj9drr0)

ã¾ãšã¯å³ä¸‹ã®ã€snsç­‰ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚„ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚
è¡¨ç¤ºã™ã‚‹ã‚¢ã‚¤ã‚³ãƒ³ç­‰ã¯ã€ã‚¢ã‚¤ã‚³ãƒ³]ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’å—ã‘å–ã£ã¦ã€componentã‚’ä½¿ã„ã¾ã‚ã›ã‚‹ã‚ˆã†ã«è¨­è¨ˆã—ã¾ã™ã€‚
ãªãŠã€å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå¿…ãšã—ã‚‚å­˜åœ¨ã™ã‚‹ã¨ã¯é™ã‚‰ãªã„ãŸã‚ã€æ—©æœŸreturnã‚’å®Ÿæ–½ã—ã¾ã™ã€‚
ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹imgã®srcã¯ã€next/imageãŒæä¾›ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ãªãã€ç”»åƒæœ€é©åŒ–ã®ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³apiã‚’ç›´æ¥åˆ©ç”¨ã—ã¾ã™ã€‚ç†ç”±ã¯å¾Œã»ã©ã€‚

```tsx: src/ui/card/profile/Icon.tsx
interface Props {
  name: string | null;
  icon: string;
}

export const Icon = ({name, icon}: Props) => {
  if(!name) return null;
  return (
    <div className="mr-0 ml-24 text-gray-100 flex">
      <div className="h-8 w-8 mt-1 mr-2">
        <img
          src={"/_next/image?url=%2F"+icon+".svg&w=64&q=75"} 
          alt={name} 
          width="25" height="25"
        />
      </div>
      <p>{name}</p>
    </div>
  );
};
```

å†åˆ©ç”¨ã§ãã‚‹ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Ÿè£…ã§ããŸã®ã§ã€ä¸‹æ®µã®ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå…¨ä½“ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

```tsx: src/ui/card/profile/Profile.tsx
import { Icon } from "./Icon";
import { ProfileType } from '../../../utils/getProfile';

export const Profile = ({
  name, picture, twitter, provider, email, blog
}: ProfileType): JSX.Element => {
  const src = "/_next/image?url="+encodeURIComponent(picture)+"&w=384&q=75"
  return (
    <div className="py-2 pl-12">
      <div className="flex flex-row">
        <div>
          <img src={src}ã€€alt={name}ã€€className="rounded-full"ã€€width="120" height="120"/>
        </div>
        <div className="flex flex-col">
          <p className="text-3xl ml-24 mb-3 -mt-4 font-bold text-white">{name}</p>
          <Icon name={name} icon={provider}/>
          <Icon name={twitter} icon="twitter" />
          <Icon name={email} icon="mail"/>
          <Icon name={blog} icon="blog" />
        </div>
      </div>
    </div>
  );
};
```
æ¬¡ã«ä¸Šæ®µã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚‚ä½œæˆã—ã€ååˆºå…¨ä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®Œæˆã•ã›ã¦ã„ãã¾ã™ã€‚

```tsx: src/ui/card/grass.tsx
interface Props {
  provider: string;
  name: string;
}

export const Grass = ({provider, name}: Props): JSX.Element => {
  if(provider !== 'github') return null;

  return (
    <div className="ml-28">
      <img
        src={"/_next/image?url=https%3A%2F%2Fgrass-graph.moshimo.works%2Fimages%2F"+name+".png%3Fbackground%3Dnone&w=1200&q=75"}
        width={380} height={70}
      />
    </div>
  )
}
```
useGetSessionã¯ã€èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§ã™ã€‚
å–å¾—ã™ã‚‹æƒ…å ±ã¯profileDataã«æ ¼ç´ã—ã¾ã™ãŒã€èªè¨¼å‰ãªã©ã€ç©ºã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
ç©ºã®å ´åˆã«ã¯ã€EmptyCardLayoutã®ã‚ˆã†ã«ã€åˆ¥é€”ç”¨æ„ã—ã¾ã™ã€‚
ç¾çŠ¶ã€EmptyCardLayoutã¯ãƒ­ã‚´ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ã ã‘ã§ã™ãŒã€ä»–ã«ã‚‚èªè¨¼å‰ã®æ™‚ã«è¡¨ç¤ºåˆ‡ã‚Šåˆ†ã‘ã‚’ã—ãŸã„å ´åˆãŒå‡ºã¦ããŸã‚ˆã†ã«åˆ‡ã‚Šåˆ†ã‘ã¦ã„ã¾ã™ã€‚

```tsx: src/ui/card/cardLayout.tsx
import { Profile } from './profile/Profile';
import { useGetSession } from '../../utils/useGetSession';
import { OuterColorType } from '../../utils/useChangeColor';
import { EmptyCardLayout } from './emptyCardProfile';
import { Grass } from './grass';
import { isNullOrUndefined } from 'util';

interface Props {
  innerColor: string;
  outerColor: OuterColorType;
}

export const CardLayout = ({
  innerColor, outerColor
}: Props ): JSX.Element => {
  const {profileData} = useGetSession();
  if(isNullOrUndefined(profileData)) return <EmptyCardLayout innerColor={innerColor} outerColor={outerColor}/>
  return (
   <div id="cardScreen" className={"w-crd h-80 my-10 mx-auto relative border-4 border-solid border-white p-1.5 rounded-3xl bg-gradient-to-r from-"+outerColor.from+" via-"+outerColor.via+" to-"+outerColor.to}>
      <div className={"w-full h-full rounded-3xl bg-" + innerColor}>
        <div className="flex">
          <img src={"/_next/image?url=%2Flogo.svg&w=384&q=75"} className="rounded-full" width='100' height='100' />
          <Grass provider={profileData.provider} name={profileData.name} />
        </div>
        <Profile 
          name={profileData.name}
          picture={profileData.picture}
          provider={profileData.provider} 
          twitter={profileData.twitter}
          email={profileData.email}
          blog={profileData.blog}
        />
      </div>
   </div>
  );
};
```
ååˆºã®è¡¨ç¤ºéƒ¨åˆ†ã¯ã‚ã‚‰ã‹ãŸå®Œæˆã—ãŸã®ã§ã€æ¬¡ã¯oauthèªè¨¼ã®ç™ºç«å‡¦ç†ã€oauthã‹ã‚‰æƒ…å ±ã‚’å–å¾—ã™ã‚‹å‡¦ç†ã€ååˆºã‚’ç”»åƒã¨ã—ã¦ä¿å­˜ã™ã‚‹å‡¦ç†ã¨ååˆºã®å¤–æ ã¨å†…å´ã®è‰²ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«å¤‰æ›´ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

oauthèªè¨¼ã‚’ç™ºç«ã™ã‚‹å‡¦ç†ã¯SignInLayoutã¨SignInå†…ã§å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
ä»Šå›ã¯èªè¨¼providerã¨ã—ã¦githubã¨googleã®ã¿ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ãŒã€ä»Šå¾Œã®æ‹¡å¼µæ€§ã‚’æŒãŸã›ã‚‹ãŸã‚ã«ã€providerã®åå‰ã‚’å¼•ãæ¸¡ã™ã“ã¨ã§åˆ¥ã®providerã«èªè¨¼ã‚’é€šã›ã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚
èªè¨¼è‡ªä½“ã¯ã€next-authãŒæä¾›ã—ã¦ã„ã‚‹signInãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚äº‹å‰ã«[...nextauth]ã«å®šç¾©ã—ãŸproviderã§ã‚ã‚Œã°ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«providerã®æ–‡å­—åˆ—ã‚’æ¸¡ã™ã ã‘ã§ã€èªè¨¼ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```tsx: src/ui/SignIn/SignInLayout.tsx
import { SignIn } from './signIn';
export const SignInLayout = (): JSX.Element => {
  return (
    <div className="flex">
      <SignIn provider="github"/>
      <SignIn provider="google" />
    </div>
  )
}
```

```tsx: src/ui/SignIn/signin.tsx
import { signIn } from 'next-auth/client'
import { MouseEvent } from 'react';

interface Props {
  provider: string;
}

export const SignIn = ({provider}: Props) => {
  const signInButton = (event: MouseEvent<HTMLElement>) => {
    signIn(event.currentTarget.dataset.name)
  }
  return (
    <div className="mx-3">
      <button data-name={provider} onClick={signInButton}>Sign In with {provider}</button>
    </div>
  )
}
```

oauthã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å‡¦ç†ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦å®Ÿè£…ã‚’è¡Œã„ã¾ã—ãŸã€‚
signinå¾Œã«ãƒ›ãƒ¼ãƒ ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ãŸã‚ã€ãƒšãƒ¼ã‚¸ã®ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã‚’ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚’è¡Œã„ã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹ã¨ã€æƒ…å ±éå¤šã§ã‚ã£ãŸã‚Šã€æ‰±ã„ã«ãã„éƒ¨åˆ†ãŒã‚ã‚‹ã®ã§å…ˆã«æ•´å½¢ã‚’è¡Œã£ãŸå¾Œã«æ ¼ç´ã‚’è¡Œã„ã¾ã™ã€‚

```ts: src/utils/useGetSession.ts
import { useEffect, useState } from "react";
import { getSession } from "next-auth/client";
import { isNullOrUndefined } from "util";

import { getProfile, ProfileType } from "./getProfile";

interface SessionAPIResponse {
  provider: string;
  email: string | null;
  exp: number;
  iat: number;
  name: string;
  picture: string;
  profile: {};
}

export const useGetSession = () => {
  const [profileData, setProfile] = useState<ProfileType | undefined>();
  useEffect(() => {
    const getFunction = async () => {
      await getSession().then<SessionAPIResponse>((session) => {
        if (!isNullOrUndefined(session)) {
          const profile = getProfile(session);
          setProfile(profile);
        }
      });
    };
    getFunction();
  }, []);
  return { profileData };
};

```
ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢å‡¦ç†
```ts: src/utils/getProfile.ts
export interface ProfileType {
  provider: string;
  email: string | null;
  name: string;
  picture: string;
  twitter: string | null;
  blog: string | null;
}

export function getProfile(response): ProfileType {
  const twitter = response.provider === 'github' ? response.profile.twitter_username : null;
  const blog = response.provider === 'github' ? response.profile.blog : null;

  return {
    provider: response.provider,
    email: response.email,
    name: response.name,
    picture: response.picture,
    twitter: twitter,
    blog: blog
  }
}
```

æ¬¡ã«ã€ååˆºéƒ¨åˆ†ã‚’ç”»åƒã¨ã—ã¦ä¿å­˜ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚
webä¸Šã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ç”»åƒã¨ã—ã¦ä¿å­˜ã™ã‚‹éš›ã«ã¯ã€canvasä¸Šã«ç½®ãæ›ãˆãŸä¸Šã§ãã‚Œã‚’image/jpegãªã©ã«å¤‰æ›ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚
ã“ã“ã§ã¯ã€html2canvasã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã€æŒ‡å®šè¦ç´ å†…ã‚’canvasåŒ–ã—ã¾ã™ã€‚

ã“ã“ã§ã€å…ˆã»ã©ã‚ã’ãŸnext/imageã®ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³apiã‚’ç›´æ¥å©ãç†ç”±ã«æˆ»ã‚Šã¾ã™ã€‚
next/imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªä½“ã§ã¯ã€ç”»åƒã®æœ€é©åŒ–ã¯è¡Œã‚ã‚Œã¦ãŠã‚‰ãšã€URLã®ç”Ÿæˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã ã‘ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚srcsetå†…ã«è¤‡æ•°ã®ç”»åƒURLã‚’æŒ‡å®šã—ã¦ãŠãã€ç”»é¢ã‚µã‚¤ã‚ºã”ã¨ã«é©ã—ãŸURLã‚’è‡ªå‹•çš„ã«ç”Ÿæˆã€é¸æŠã—ã¦ã„ã¾ã™ã€‚
html2canvasã¯domã‚„cssã‚’èª­ã¿è¾¼ã¿ã€ãã‚Œã‚‰ã‚’å…ƒã«canvasã«æç”»ã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€next/imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãã®ã¾ã¾åˆ©ç”¨ã—ãŸæ™‚ã«ã¯ã€æƒ…å ±ãŒä¸€æ„ã«æ±ºã¾ã£ã¦ãŠã‚‰ãšã€ç”»åƒã‚µã‚¤ã‚ºãŒãŠã‹ã—ããªã£ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã—ãŸã€‚
ã¾ãŸã€å¤–éƒ¨urlã‚’ç”»åƒã¨ã—ã¦è¡¨ç¤ºã—ãŸéš›ã€ç”»åƒã¯åˆ¥ã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰å–å¾—ã—ãŸãŸã‚ã€å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚
ã“ã‚Œã‚‰ã®å•é¡Œã¯ã€next/imageå†…ã®apiã‚’ç›´æ¥å©ãã“ã¨ã§è§£æ±ºã—ã¾ã—ãŸã€‚
ãªãŠã€next/imageã«é–¢ã™ã‚‹èª¬æ˜ã¯ã€ä»¥ä¸‹ã®æ–¹ã€…ã®æ–¹ãŒè©³ç´°ã«èª¬æ˜ã—ã¦ã„ã¾ã—ãŸã®ã§ã€èˆˆå‘³ãŒã‚ã‚Œã°ãœã²ã€‚
https://zenn.dev/saitoeku3/articles/read-next-image
https://zenn.dev/catnose99/articles/883f7dbbe21632a5254e

```tsx: src/ui/SaveButton.tsx
import html2canvas from 'html2canvas';

export const SaveButton = () => {
  const getElement = () => {
    html2canvas(document.querySelector("#cardScreen"), {
      width: 640,
      height: 320
    })
    .then(canvas => {
      let a = document.createElement('a')
      a.href = canvas.toDataURL('image/jpeg', 1.0);
      a.download = 'mycard.jpg';
      a.click();
    })
  }
  return (
    <div>
      <button onClick={getElement}>save</button>
    </div>
  )
}
```

ã“ã“ã¾ã§ã€å¿…è¦ãªæ©Ÿèƒ½ã®å®Ÿè£…ã¯çµ‚äº†ã§ã™ã€‚
github/googleèªè¨¼ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºã€ç”»åƒã¨ã—ã¦ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ãŒã§ããŸã¨æ€ã„ã¾ã™ã€‚

ã“ã“ã§ã€ãŠéŠã³æ©Ÿèƒ½ã¨ã—ã¦ã€ååˆºã®ç¸ã¨ä¸­ã®è‰²ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
tailwindã§ã¯ã€æ±ºã‚ã‚‰ã‚ŒãŸè‰²ã«å¯¾ã—ã¦å€¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§è‰²ã‚’æ±ºå®šã—ã¦ã„ã¾ã™ã€‚`red-500`
ãã“ã§ã€è‰²ã¨å€¤ã‚’ãã‚Œãã‚Œé…åˆ—ã«åˆæœŸå€¤ã¨ã—ã¦å…¥ã‚Œã¦ãŠãã€ä¹±æ•°ã‚’ç”¨ã„ã¦ãƒŸãƒƒã‚¯ã‚¹ã•ã›ã‚‹ã“ã¨ã§ç•°ãªã‚‹è‰²ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚(ã“ã“ã®è¨­è¨ˆã¯ã€ç¾åœ¨é€²è¡Œå½¢ã§æ¤œè¨ä¸­ã§ã™)
ãªãŠã€blackã¨whiteã«é–¢ã—ã¦ã¯ã€å€¤ãŒå­˜åœ¨ã—ã¦ã„ãªã„ãŸã‚ã€è‰²ã®ã¿ã‚’è¿”ã™å‡¦ç†ã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```tsx: src/ui/ColorButtonLayout.tsx
interface Props {
  changeInnerColor: () => void;
  changeOuterColor: () => void;
}

export const ColorButtonLayout = ({
  changeInnerColor, changeOuterColor
}: Props ): JSX.Element => {
  return (
    <div>
      <button onClick={changeInnerColor}>change inner color</button>
      <button onClick={changeOuterColor}>change outer color</button>
    </div>
  )
}
```

```ts: src/utils/useChangeColor.ts
import { useState } from "react";

const COLOR = ["black","white","gray","red","yellow","green","blue","indigo","purple","pink"];
const GRADIENT = ["50","100","200","300","400","500","600","700","800","900"];

export interface OuterColorType {
  from: string;
  via: string;
  to: string;
}

export const useChangeColor = (): [
  () => void,
  () => void,
  {
    innerColor: string;
    outerColor: OuterColorType;
  }
] => {
  const [innerColor, setInnerColor] = useState("black");
  const [outerColor, setOuterColor] = useState({
    from: "purple-400",
    via: "pink-500",
    to: "red-500",
  });

  const randomNumber = (): number => Math.floor(Math.random() * 10);
  const getColorData = (data: Array<string>): string => data[randomNumber()];

  const joinColorData = (): string => {
    const gColor = getColorData(COLOR);
    if (gColor === "black" || gColor === "white") {
      return gColor;
    } else {
      return gColor + "-" + getColorData(GRADIENT);
    }
  };
  const changeOuterColor = () => {
    setOuterColor({
      from: joinColorData(),
      via: joinColorData(),
      to: joinColorData(),
    });
  };
  const changeInnerColor = () => {
    setInnerColor(joinColorData());
  };

  return [changeInnerColor, changeOuterColor, { innerColor, outerColor }];
};

```

æœ€å¾Œã«ã€ä»Šã¾ã§å®Ÿè£…ã—ãŸã‚‚ã®ã‚’çµ„ã¿åˆã‚ã›ã¦ã„ãã¾ã™ã€‚
```tsx: src/pages/index.tsx
import * as React from 'react';
import { CardLayout } from '../ui/card/cardlayout';
import { FooterLayout } from '../ui/FooterLayout';
import { NavBar } from '../ui/navBar';
import { Title } from '../ui/Title';
import { SignInLayout } from '../ui/SignIn/SignInLayout';
import { ColorButtonLayout } from '../ui/ColorButtonLayout';
import { useChangeColor } from '../utils/useChangeColor';
import { SaveButton } from '../ui/SaveButton';

export default function Home() {
  const [changeInnerColor, changeOuterColor, {innerColor, outerColor}] = useChangeColor(); 

  return (
    <div className="min-h-screen flex flex-col justify-items-center">
      <NavBar />
      <div className="flex flex-col mb-10 items-center">
        <Title text="Create your own card!!" />
        <SignInLayout />
        
        <ColorButtonLayout 
          changeInnerColor={changeInnerColor}
          changeOuterColor={changeOuterColor}
        />
        <SaveButton />
        <CardLayout innerColor={innerColor} outerColor={outerColor}/>
      </div>
      <FooterLayout />
    </div>
  )
}
```

# ã¾ã¨ã‚
æ€ã£ãŸã‚ˆã‚Šéå¸¸ã«é•·ã„è¨˜äº‹ã¨ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚
ã“ã“ã¾ã§èª­ã‚“ã§ãã ã•ã£ãŸæ–¹ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
å½“åˆã¯ã“ã“ã«ã€èˆˆå‘³ãƒ»é–¢å¿ƒã®ã‚ã‚‹ã‚¿ã‚°ã®ä½œæˆ/ç™»éŒ²ã€ã•ã‚‰ã«ã¯ååˆºã®æ¤œç´¢æ©Ÿèƒ½ç­‰ã‚’recoilã¨firebaseã‚’ç”¨ã„ã¦ã‚„ã£ã¦ã„ã“ã†ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€æµçŸ³ã«å¤šã™ãã ãªã¨åçœã—ã¾ã—ãŸã€‚(è¨˜äº‹å¤–ã§å®Ÿè£…ã—ã¦ã„ãäºˆå®šã§ã™)
ä»Šå›ã®è¨˜äº‹ã§ã€èªè¨¼ã‚„domã€è¨­è¨ˆãªã©ã€ã„ã‚ã„ã‚è€ƒãˆã•ã›ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šãã€è‰¯ã„ä½“é¨“ã ã£ãŸãªã¨æ€ã„ã¾ã—ãŸã€‚
readmeã¯ãã®ã†ã¡æ•´å‚™ã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚